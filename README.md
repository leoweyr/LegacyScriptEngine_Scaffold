# Legacy Script Engine Scaffold

A utility for assisting in the development of Legacy Script Engine plugins, supporting a native development experience on the Node.js platform.

> Only TypeScript projects are supported at the moment.

## üì¶ Prepare

It is a non-intrusive tool, meaning it does not require any mandatory files to be kept in your project. However, it is recommended to add it as a development dependency to your environment for convenient usage:

```bash
npm install @levimc-lse/scaffold --save-dev
```

## üöÄ Usage

Generate manifest.json for the Legacy Script Engine plugin:

```bash
npx lses manifest
```

Package the Legacy Script Engine plugin:

```bash
npx lses pack
```

Deploy the Legacy Script Engine plugin package to the LeviLamina server:

```bash
npx lses deploy <path> [options]
```

| Argument | Description                                   | Type   |
|----------|-----------------------------------------------|--------|
| `<path>` | Specific LeviLamina server working directory. | String |

| Option                            | Description                     | Type    | Default |
|-----------------------------------|---------------------------------|---------|---------|
| `-h, --host <remoteHost>`         | Remote Windows OpenSSH host     | String  |         |
| `-P, --port <remotePort>`         | Remote Windows OpenSSH port     | Integer | 22      |
| `-u, --username <remoteUsername>` | Remote Windows OpenSSH username | String  |         |
| `-p, --password <remotePassword>` | Remote Windows OpenSSH password | String  |         |

> ‚ö†Ô∏è **Known Issue**
>
> When deploying to a remote LeviLamina server where the target plugin has never been installed before, the local terminal may still be waiting after the deployment task is completed, please use CTRL + C to manually terminate the local terminal.


## ‚ùó Important

The `main` configuration entry file in package.json should be relative to the project's working directory, <font color="red">not the directory of the Legacy Script Engine plugin package.</font>

For example, in a TypeScript project where index.ts is defined as the entry point in source code and the TypeScript compiler is configured via tsconfig.json to emit to the build directory named dist, you should set the `main` field in package.json to `dist/index.js`. 

This ensures that the `entry` field in the manifest.json generated by `npx lses manifest` can be correctly identified and located by LeviLamina.
